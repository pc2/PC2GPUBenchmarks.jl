<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>GPU Stress Test · PC2GPUBenchmarks.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PC2GPUBenchmarks.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">PC2GPUBenchmarks</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/gpuinfo/">CUDA/GPU Information</a></li><li><a class="tocitem" href="../../examples/host2device_memcpy/">Host-to-Device Memcpy</a></li><li><a class="tocitem" href="../../examples/p2p_memcpy/">Peer-to-Peer Memcpy</a></li><li><a class="tocitem" href="../../examples/saxpy_gpu/">Memory Bandwidth</a></li><li><a class="tocitem" href="../../examples/gpustresstest/">GPU Stress Test</a></li><li><a class="tocitem" href="../../examples/peakflops_gpu/">Peak Performance</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Explanations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../explanations/dgx/">DGX Details</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../gpuinfo/">CUDA/GPU Information</a></li><li><a class="tocitem" href="../host2device_memcpy/">Host-to-Device Memcpy</a></li><li><a class="tocitem" href="../p2p_memcpy/">Peer-to-Peer Memcpy</a></li><li><a class="tocitem" href="../saxpy_gpu/">Memory Bandwidth (SAXPY GPU)</a></li><li class="is-active"><a class="tocitem" href>GPU Stress Test</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="../peakflops_gpu/">Peakflops GPU</a></li><li><a class="tocitem" href="../monitoring/">Monitoring</a></li><li><a class="tocitem" href="../cuda_wrappers/">CUDA Wrappers</a></li><li><a class="tocitem" href="../utility/">Utility</a></li><li><a class="tocitem" href="../workers/">Worker Utilities</a></li><li><a class="tocitem" href="../hdf5/">HDF5</a></li><li><a class="tocitem" href="../stresstest_cpu/">CPU Stress Test</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">References</a></li><li class="is-active"><a href>GPU Stress Test</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>GPU Stress Test</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://git.uni-paderborn.de/pc2/julia/PC2GPUBenchmarks.jl/blob/master/docs/src/refs/gpustresstest.md#" title="Edit source"><span class="docs-icon fa"></span><span class="docs-label is-hidden-touch">Edit source</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="GPU-Stresstest"><a class="docs-heading-anchor" href="#GPU-Stresstest">GPU Stresstest</a><a id="GPU-Stresstest-1"></a><a class="docs-heading-anchor-permalink" href="#GPU-Stresstest" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#PC2GPUBenchmarks.stresstest-Tuple{Any}"><code>PC2GPUBenchmarks.stresstest</code></a></li><li><a href="#PC2GPUBenchmarks.StressTestBatched"><code>PC2GPUBenchmarks.StressTestBatched</code></a></li><li><a href="#PC2GPUBenchmarks.StressTestEnforced"><code>PC2GPUBenchmarks.StressTestEnforced</code></a></li><li><a href="#PC2GPUBenchmarks.StressTestFixedIter"><code>PC2GPUBenchmarks.StressTestFixedIter</code></a></li><li><a href="#PC2GPUBenchmarks.StressTestStoreResults"><code>PC2GPUBenchmarks.StressTestStoreResults</code></a></li></ul><h3 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="PC2GPUBenchmarks.stresstest-Tuple{Any}" href="#PC2GPUBenchmarks.stresstest-Tuple{Any}"><code>PC2GPUBenchmarks.stresstest</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stresstest(device_or_devices)</code></pre><p>Run a GPU stress test (matrix multiplication) on one or multiple GPU devices, as specified by the positional argument. If no argument is provided (only) the currently active GPU will be used.</p><p><strong>Keyword arguments:</strong></p><p>Choose one of the following (or none):</p><ul><li><code>duration</code>: stress test will take about the given time in seconds. (StressTestBatched)</li><li><code>enforced_duration</code>: stress test will take almost precisely the given time in seconds. (StressTestEnforced)</li><li><code>approx_duration</code>: stress test will hopefully take approximately the given time in seconds. No promises made! (StressTestFixedIter)</li><li><code>niter</code>: stress test will run the given number of matrix-multiplications, however long that will take. (StressTestFixedIter)</li><li><code>mem</code>: number (<code>&lt;:Real</code>) between 0 and 1, indicating the fraction of the available GPU memory that should be used, or a <code>&lt;:UnitPrefixedBytes</code> indicating an absolute memory limit. (StressTestStoreResults)</li></ul><p>General settings:</p><ul><li><code>dtype</code> (default: <code>Float32</code>): element type of the matrices</li><li><code>size</code> (default: <code>2048</code>): matrices of size <code>(size, size)</code> will be used</li><li><code>verbose</code> (default: <code>true</code>): toggle printing of information</li><li><code>parallel</code> (default: <code>true</code>): If <code>true</code>, will (try to) run each GPU test on a different Julia thread. Make sure to have enough Julia threads.</li><li><code>threads</code> (default: <code>nothing</code>): If <code>parallel == true</code>, this argument may be used to specify the Julia threads to use.</li><li><code>clearmem</code> (default: <code>false</code>): If <code>true</code>, we call <a href="../utility/#PC2GPUBenchmarks.clear_all_gpus_memory"><code>clear_all_gpus_memory</code></a> after the stress test.</li></ul><p>When <code>duration</code> is specifiec (i.e. <a href="#PC2GPUBenchmarks.StressTestEnforced"><code>StressTestEnforced</code></a>) there is also:</p><ul><li><code>batch_duration</code> (default: <code>ceil(Int, duration/10)</code>): desired duration of one batch of matmuls.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.uni-paderborn.de/pc2/julia/PC2GPUBenchmarks.jl/blob/184451399b9d77b26e7feda9fdc3926c1be42d81/src/stresstest.jl#L1-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PC2GPUBenchmarks.StressTestBatched" href="#PC2GPUBenchmarks.StressTestBatched"><code>PC2GPUBenchmarks.StressTestBatched</code></a> — <span class="docstring-category">Type</span></header><section><div><p>GPU stress test (matrix multiplications) in which we try to run for a given time period. We try to keep the CUDA stream continously busy with matmuls at any point in time. Concretely, we submit batches of matmuls and, after half of them, we record a CUDA event. On the host, after submitting a batch, we (non-blockingly) synchronize on, i.e. wait for, the CUDA event and, if we haven&#39;t exceeded the desired duration already, submit another batch.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.uni-paderborn.de/pc2/julia/PC2GPUBenchmarks.jl/blob/184451399b9d77b26e7feda9fdc3926c1be42d81/src/stresstest_tests.jl#L34-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PC2GPUBenchmarks.StressTestEnforced" href="#PC2GPUBenchmarks.StressTestEnforced"><code>PC2GPUBenchmarks.StressTestEnforced</code></a> — <span class="docstring-category">Type</span></header><section><div><p>GPU stress test (matrix multiplications) in which we run almost precisely for a given time period (duration is enforced).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.uni-paderborn.de/pc2/julia/PC2GPUBenchmarks.jl/blob/184451399b9d77b26e7feda9fdc3926c1be42d81/src/stresstest_tests.jl#L112-L114">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PC2GPUBenchmarks.StressTestFixedIter" href="#PC2GPUBenchmarks.StressTestFixedIter"><code>PC2GPUBenchmarks.StressTestFixedIter</code></a> — <span class="docstring-category">Type</span></header><section><div><p>GPU stress test (matrix multiplications) in which we run for a given number of iteration, or try to run for a given time period (with potentially high uncertainty!). In the latter case, we estimate how long a synced matmul takes and set <code>niter</code> accordingly.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.uni-paderborn.de/pc2/julia/PC2GPUBenchmarks.jl/blob/184451399b9d77b26e7feda9fdc3926c1be42d81/src/stresstest_tests.jl#L234-L238">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PC2GPUBenchmarks.StressTestStoreResults" href="#PC2GPUBenchmarks.StressTestStoreResults"><code>PC2GPUBenchmarks.StressTestStoreResults</code></a> — <span class="docstring-category">Type</span></header><section><div><p>GPU stress test (matrix multiplications) in which we store all matmul results and try to run as many iterations as possible for a certain memory limit (default: 90% of free memory).</p><p>This stress test is somewhat inspired by <a href="https://github.com/wilicc/gpu-burn">gpu-burn</a> by Ville Timonen.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.uni-paderborn.de/pc2/julia/PC2GPUBenchmarks.jl/blob/184451399b9d77b26e7feda9fdc3926c1be42d81/src/stresstest_tests.jl#L158-L163">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../saxpy_gpu/">« Memory Bandwidth (SAXPY GPU)</a><a class="docs-footer-nextpage" href="../peakflops_gpu/">Peakflops GPU »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.13 on <span class="colophon-date" title="Monday 28 February 2022 12:49">Monday 28 February 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
